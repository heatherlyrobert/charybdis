#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                charybdis.h                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (STACK) verify basic stack                                          0s  add             stack_add, stack_purge                                                       ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     prepare for testing                  PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    

   COND  (1)  verify empty state                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      check count                          stack__unit                 "count"     , 0                                                                                       s_equal     STACK count      : 0                                                                                 
     get      check entry                          stack__unit                 "entry"     , 0                                                                                       s_equal     STACK entry ( 0) : ииииииииии  ииииииииии     иx    иy    иw    иt  и                             
     get      check entry                          stack__unit                 "entry"     , 1                                                                                       s_equal     STACK entry ( 1) : ииииииииии  ииииииииии     иx    иy    иw    иt  и                             

   COND       verify adding a winid                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             stack_add                   'y'    , 0x2100040                                                                                    i_equal     0                                                                                                    
     get      check count                          stack__unit                 "count"     , 0                                                                                       s_equal     STACK count      : 1                                                                                 
     get      check entry                          stack__unit                 "entry"     , 0                                                                                       s_equal     STACK entry ( 0) :    2100040           0    -1x   -1y   -1w   -1t  ши21иии4и                     
     get      check entry                          stack__unit                 "entry"     , 1                                                                                       s_equal     STACK entry ( 1) : ииииииииии  ииииииииии     иx    иy    иw    иt  и                             

   COND       verify appending the frame winid                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             stack_add                   'q'    , 0xe05ea7                                                                                     i_equal     0                                                                                                    
     get      check count                          stack__unit                 "count"     , 0                                                                                       s_equal     STACK count      : 1                                                                                 
     get      check entry                          stack__unit                 "entry"     , 0                                                                                       s_equal     STACK entry ( 0) :    2100040      e05ea7    -1x   -1y   -1w   -1t  ши21иии4и                     
     get      check entry                          stack__unit                 "entry"     , 1                                                                                       s_equal     STACK entry ( 1) : ииииииииии  ииииииииии     иx    иy    иw    иt  и                             

   COND       verify purging                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call purge                           stack_purge                                                                                                                       i_equal     0                                                                                                    

   DITTO (1)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify re-adding original                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             stack_add                   'y'    , 0x2100040                                                                                    i_equal     0                                                                                                    
     exec     call add                             stack_add                   'q'    , 0xe05ea7                                                                                     i_equal     0                                                                                                    
     get      check count                          stack__unit                 "count"     , 0                                                                                       s_equal     STACK count      : 1                                                                                 
     get      check entry                          stack__unit                 "entry"     , 0                                                                                       s_equal     STACK entry ( 0) :    2100040      e05ea7    -1x   -1y   -1w   -1t  ши21иии4и                     
     get      check entry                          stack__unit                 "entry"     , 1                                                                                       s_equal     STACK entry ( 1) : ииииииииии  ииииииииии     иx    иy    иw    иt  и                             

   COND       verify adding another                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             stack_add                   'y'    , 0x0e00040                                                                                    i_equal     0                                                                                                    
     exec     call add                             stack_add                   'q'    , 0xf00111                                                                                     i_equal     0                                                                                                    
     get      check count                          stack__unit                 "count"     , 0                                                                                       s_equal     STACK count      : 2                                                                                 
     get      check entry                          stack__unit                 "entry"     , 0                                                                                       s_equal     STACK entry ( 0) :    2100040      e05ea7    -1x   -1y   -1w   -1t  ши21иии4и                     
     get      check entry                          stack__unit                 "entry"     , 1                                                                                       s_equal     STACK entry ( 1) :     e00040      f00111    -1x   -1y   -1w   -1t  шииeиии4и                     
     get      check entry                          stack__unit                 "entry"     , 2                                                                                       s_equal     STACK entry ( 2) : ииииииииии  ииииииииии     иx    иy    иw    иt  и                             

   COND       verify adding a third                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             stack_add                   'y'    , 0x6400040                                                                                    i_equal     0                                                                                                    
     exec     call add                             stack_add                   'q'    , 0xaaaaaa                                                                                     i_equal     0                                                                                                    
     get      check count                          stack__unit                 "count"     , 0                                                                                       s_equal     STACK count      : 3                                                                                 
     get      check entry                          stack__unit                 "entry"     , 0                                                                                       s_equal     STACK entry ( 0) :    2100040      e05ea7    -1x   -1y   -1w   -1t  ши21иии4и                     
     get      check entry                          stack__unit                 "entry"     , 1                                                                                       s_equal     STACK entry ( 1) :     e00040      f00111    -1x   -1y   -1w   -1t  шииeиии4и                     
     get      check entry                          stack__unit                 "entry"     , 2                                                                                       s_equal     STACK entry ( 2) :    6400040      aaaaaa    -1x   -1y   -1w   -1t  ши64иии4и                     
     get      check entry                          stack__unit                 "entry"     , 3                                                                                       s_equal     STACK entry ( 3) : ииииииииии  ииииииииии     иx    иy    иw    иt  и                             

   COND       verify another just to stress it                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             stack_add                   'y'    , 0x3200040                                                                                    i_equal     0                                                                                                    
     exec     call add                             stack_add                   'q'    , 0xabcdef                                                                                     i_equal     0                                                                                                    
     get      check count                          stack__unit                 "count"     , 0                                                                                       s_equal     STACK count      : 4                                                                                 
     get      check entry                          stack__unit                 "entry"     , 0                                                                                       s_equal     STACK entry ( 0) :    2100040      e05ea7    -1x   -1y   -1w   -1t  ши21иии4и                     
     get      check entry                          stack__unit                 "entry"     , 1                                                                                       s_equal     STACK entry ( 1) :     e00040      f00111    -1x   -1y   -1w   -1t  шииeиии4и                     
     get      check entry                          stack__unit                 "entry"     , 2                                                                                       s_equal     STACK entry ( 2) :    6400040      aaaaaa    -1x   -1y   -1w   -1t  ши64иии4и                     
     get      check entry                          stack__unit                 "entry"     , 3                                                                                       s_equal     STACK entry ( 3) :    3200040      abcdef    -1x   -1y   -1w   -1t  ши32иии4и                     
     get      check entry                          stack__unit                 "entry"     , 4                                                                                       s_equal     STACK entry ( 4) : ииииииииии  ииииииииии     иx    иy    иw    иt  и                             

   COND       verify program teardown                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap-up the program                  PROG__unit_end                                                                                                                    i_equal     0                                                                                                    


